"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{16797:function(e,t,r){r.d(t,{H:function(){return u}});var i=r(85893),n=r(67294),a=r(5266),o=r(2337),s=r(94623),l=r(69306),d=r(30506);function u(e){let{className:t}=e,r=(0,l.ac)(768),u=(0,n.useMemo)(()=>{let e=Array(50).fill(0).map(()=>({width:Math.floor(100*Math.random()+100),height:Math.floor(100*Math.random()+100)}));return r?e.slice(0,10):e},[r]);return(0,i.jsx)(a.ZP,{columnsCountBreakPoints:s.F,className:t,children:(0,i.jsx)(o.Z,{gutter:"4px",children:u.map((e,t)=>(0,i.jsx)(d.O,{className:"aspect-square w-full rounded-lg",style:{aspectRatio:e.width/e.height}},t))})})}},80683:function(e,t,r){r.r(t),r.d(t,{__N_SSP:function(){return R},default:function(){return z}});var i=r(85893),n=r(67294),a=r(9008),o=r.n(a),s=r(94623),l=r(8891),d=r.n(l),u=r(4371),c=r(77428),p=r(59820),m=r(69306),f=r(62363),h=r(62469),g=r(1233),x=r(35893),v=r(94688),j=r(14319),y=r(88361),C=r(41664),k=r.n(C),w=r(47922);function b(e){let{tabs:t,activeTabId:r}=e,a=(0,w.y)("optimize-feed-tabs"),[o,s]=n.useState(r),l=a?o:r,d=(0,m.ac)(768),u=(0,n.useMemo)(()=>t.filter(e=>(null==e?void 0:e.id)==="top"||(null==e?void 0:e.id)==="rising"),[t]),c=n.useRef(null),p=(0,n.useCallback)(e=>{if(c.current&&d&&e.currentTarget&&"offsetLeft"in e.currentTarget){var t;c.current.scrollTo({left:null===(t=e.currentTarget)||void 0===t?void 0:t.offsetLeft,behavior:"smooth"})}},[d,c]),f=(0,n.useCallback)((e,t)=>{p(e),s(t)},[p]),h=t.find(e=>(null==e?void 0:e.id)==="daily-theme");return(0,i.jsx)("div",{ref:c,className:(0,g.cn)("overflow-x-auto scrollbar-hide max-md:snap-x scroll-px-3","scroll-px-4 snap-x"),children:(0,i.jsxs)("div",{ref:c,className:(0,g.cn)("gap-3 max-md:gap-6 flex md:px-10 mt-3 md:mt-4 md:pb-4 transition-all duration-300","px-4 md:px-4 py-4 mt-0 md:mt-0"),children:[u&&(0,i.jsx)(N,{tabs:u,onSelect:(e,t)=>f(t,e),activeTabId:l}),h&&(0,i.jsx)(P,{className:h.hidden?"hidden":"",isActive:h.id===l,activeTabId:l,title:h.name,renderBefore:h.icon,onClick:e=>f(e,h.id),url:h.url},h.name),t.map(e=>e&&(null==e?void 0:e.id)!=="daily-theme"&&(null==e?void 0:e.id)!=="rising"&&(null==e?void 0:e.id)!=="top"?(0,i.jsx)(P,{className:e.hidden?"hidden":"",isActive:e.id===l,activeTabId:l,title:e.name,renderBefore:e.icon,onClick:t=>f(t,e.id),url:e.url},e.name):null)]})})}function N(e){let t=(0,m.OV)("xs"),r="top"===e.activeTabId||"rising"===e.activeTabId,n=e.tabs.find(e=>"top"===e.id),a=e.tabs.find(e=>"rising"===e.id),o="top"===e.activeTabId?n:a;if(!o||!n||!a)return null;let s=(0,i.jsxs)(x.bO,{checked:"rising"===e.activeTabId,className:"pl-2 justify-between",onSelect:t=>e.onSelect("rising",t),withCheckmark:!1,children:[(0,i.jsxs)("span",{className:"flex gap-1 items-center",children:[a.icon," ",null==a?void 0:a.name]}),(0,i.jsx)(v.nC,{className:"mr-0.5",children:(0,i.jsx)(h.nQG,{})})]}),l=(0,i.jsxs)(x.bO,{checked:"top"===e.activeTabId,className:"pl-2 justify-between",onSelect:t=>e.onSelect("top",t),withCheckmark:!1,children:[(0,i.jsxs)("span",{className:"flex gap-1 items-center",children:[n.icon," ",null==n?void 0:n.name]}),(0,i.jsx)(v.nC,{className:"mr-0.5",children:(0,i.jsx)(h.nQG,{})})]});return(0,i.jsxs)(x.h_,{modal:t,children:[(0,i.jsx)(x.$F,{children:(0,i.jsx)(P,{title:o.name,renderBefore:o.icon,isActive:r,onClick:()=>{},activeTabId:e.activeTabId,renderAfter:(0,i.jsx)(f._M,{className:"group-hover:translate-y-0.5 transition-transform ml-auto"}),className:"w-28 pr-2"})}),(0,i.jsxs)(x.AW,{align:"start",style:{minWidth:"150px"},sideOffset:5,alignOffset:-3,children:[(0,i.jsx)(k(),{prefetch:!1,href:a.url,children:s}),(0,i.jsx)(k(),{prefetch:!1,href:n.url,children:l})]})]})}let P=(0,n.forwardRef)((e,t)=>{let{title:r,renderBefore:n,renderAfter:a,className:o,isActive:s,onClick:l,url:d,activeTabId:u,...c}=e,p=(0,i.jsxs)(j.C,{ref:t,size:"lg",onClick:e=>{l&&l(e)},variant:"outline",className:(0,g.cn)("relative cursor-pointer shrink-0 pl-3 snap-start border-none pr-3","bg-transparent border-transparent hover:bg-transparent hover:text-pg-100",s&&"text-pg-100",o),...c,children:[s&&(0,i.jsx)(y.E.span,{layoutId:"selected-tab-indicator",className:"absolute inset-0 bg-pg-600 rounded-full shadow-[inset_0_1px_1px_rgba(0,0,0,0.6)] shadow-pg-400/50",transition:{type:"spring",bounce:.1,duration:.3}}),(0,i.jsxs)("span",{className:"z-10 flex gap-1 items-center w-full",children:[n,r,a]})]});return d?(0,i.jsx)(k(),{prefetch:!1,href:d,className:"shrink-0",children:p}):p});P.displayName="FeedHeaderTab";var T=r(18794),_=r(11163),I=r(26516),L=r(66639);function M(){return(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M4.75 7.75H14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M4.75 16.25H14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M4.75 12H19.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}let S={url:"/my-feed",name:"My Feed",icon:(0,i.jsx)(L.Z,{}),id:"my-feed",isCategory:!1},F={id:"rising",url:"/feed",name:"Rising",icon:(0,i.jsx)(function(){return(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M18.2499 14C18.2499 18 15.5 19.25 11.9999 19.25C8 19.25 5.75 16.4 5.75 14C5.75 11.6 7 9.41667 8 8.75C8 11.55 10.6666 13.3333 11.9999 13.25C9.59994 9.65 11.6666 5.66667 12.9999 4.75C12.9999 9.25 18.2499 10 18.2499 14Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})})},{}),isCategory:!1},H={id:"top",url:"/feed?sort=top",name:"Top",icon:(0,i.jsx)(function(){return(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M6.25 8.75H5.75C5.19772 8.75 4.75 9.19772 4.75 9.75V15.25C4.75 15.8023 5.19772 16.25 5.75 16.25H6.25C6.80228 16.25 7.25 15.8023 7.25 15.25V9.75C7.25 9.19772 6.80228 8.75 6.25 8.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M12.25 4.75H11.75C11.1977 4.75 10.75 5.19772 10.75 5.75V15.25C10.75 15.8023 11.1977 16.25 11.75 16.25H12.25C12.8023 16.25 13.25 15.8023 13.25 15.25V5.75C13.25 5.19772 12.8023 4.75 12.25 4.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M4.75 19.25H19.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M18.25 8.75H17.75C17.1977 8.75 16.75 9.19772 16.75 9.75V15.25C16.75 15.8023 17.1977 16.25 17.75 16.25H18.25C18.8023 16.25 19.25 15.8023 19.25 15.25V9.75C19.25 9.19772 18.8023 8.75 18.25 8.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})},{}),isCategory:!1},A={id:"pure-prompt",url:"/pure-prompt",name:"Pure Prompt",icon:(0,i.jsx)(M,{}),isCategory:!1},W={id:"playground-v2.5",url:"/playground-v2.5",name:"Playground v2.5",icon:(0,i.jsx)(M,{}),isCategory:!1,feature_flag:!0},Z=[F,H,{id:"daily-theme",name:"Daily Theme",url:"/daily-theme",isCategory:!1,icon:(0,i.jsx)(I.f,{})},W,...Object.entries(c.j).map(e=>{let[t,r]=e;return{...r,isCategory:!0}}),S];var E=r(81410),O=r(7109),V=r(16797),B=r(20835),R=!0;function z(e){var t,r,a;let{data:l,initialCursor:m,initialCategory:f,postId:h,image:x,session:v,gamma:j,tabId:y,dailyTheme:C}=e,k=(0,_.useRouter)(),N=(0,n.useCallback)(()=>{let{categoryId:e}=k.query;if(e){let t=(0,c.s)(e);if(t)return Z.find(e=>e.id===t)||F}return Z.find(e=>e.url===k.asPath)||F},[k.query,k.asPath]),P=y?Z.find(e=>e.id===y)||F:0===j?H:Z.find(e=>e.id===f)||F,[I,L]=(0,n.useState)(P),[M,W]=(0,n.useState)({[I.id]:m}),R=N();(0,n.useEffect)(()=>{k.asPath.startsWith("/post/")||I.id===R.id||L(R)},[I.id,R,k.asPath]),(0,n.useEffect)(()=>{d().track("Viewed feed",{tab:I.id})},[I]);let z=(0,T.z0)(),D=(0,T.l6)(),{data:q,isLoading:G}=(0,p.ZP)(["myfeed",null==v?void 0:null===(t=v.user)||void 0===t?void 0:t.id],async()=>{var e;if(!(null==v?void 0:null===(e=v.user)||void 0===e?void 0:e.id))return[];try{let e=await fetch("/api/images/feed?userId=".concat(v.user.id,"&isFeed=true"));return(await e.json()).images||[]}catch(e){console.error(e)}return[]},{fallbackData:P.id===S.id?l:[]}),{data:Q,isLoading:U}=(0,p.ZP)(["feed",P,null==v?void 0:null===(r=v.user)||void 0===r?void 0:r.id],async()=>{let e={[P.id]:l};return await Promise.all(Z.map(async t=>{if(t.id!==P.id&&t.id!==S.id&&(!t.feature_flag||z)&&(!t.beta_feature_flag||z||D))try{var r;let i=await fetch("/api/images/risingFeed?category=".concat(t.isCategory?t.id:"","&purePrompt=").concat(t.id===A.id,"&model=").concat(null!==(r=({"playground-v2.5":"Playground_v2.5"})[t.id])&&void 0!==r?r:"","&is_top=").concat(t.id===H.id,"&tabId=").concat(t.id)),{risingImages:n,uniqueImages:a}=await i.json();e[t.id]=[...n,...a];let o=a.at(-1)||null;W(e=>{var r;return{...e,[t.id]:o&&new Date(null!==(r=null==o?void 0:o.createdAt)&&void 0!==r?r:new Date).getTime()}})}catch(r){console.error(r),e[t.id]=[]}})),e},{fallbackData:{[P.id]:l},revalidateOnFocus:!1}),Y=(0,n.useRef)(null),$=(0,E.C)(),J=(0,T.bZ)(),K=Z.filter(e=>{var t;return!(e.id===S.id&&!(null==v?void 0:null===(t=v.user)||void 0===t?void 0:t.id))&&!(e.feature_flag&&!z)&&!(e.beta_feature_flag&&!z&&!D)}),X=(0,w.y)("optimize-feed-grid"),ee=(0,O.a)(["/feed",...null==K?void 0:K.map(e=>e.id)])&&X||I.id!==P.id&&(I.id!==S.id&&U||I.id===S.id&&G);return(0,i.jsxs)(i.Fragment,{children:[h&&x?(0,i.jsx)(u.k,{prompt:x.prompt,title:x.title,url:x.url,userName:x.user.displayName}):(0,i.jsxs)(o(),{children:[(0,i.jsx)("meta",{property:"og:title",content:"Free AI image generator: Art, Social Media, Marketing | Playground AI"}),(0,i.jsx)("meta",{property:"og:description",content:"Playground (official site) is a free-to-use online AI image creator. Use it to create art, social media posts, presentations, posters, videos, logos and more."})]}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:Y,className:(0,g.cn)("sticky z-20 transition-all duration-100 ease-in-out bg-pg-900","down"===$?J?"-top-16 max-xs:-top-11":"-top-20 max-xs:-top-11":J?"top-16 max-xs:top-11":"top-20 max-xs:top-[44px]"),children:(0,i.jsx)(b,{activeTabId:I.id,tabs:K})}),(0,i.jsx)("div",{className:(0,g.cn)("flex flex-col gap-6 pt-2 px-4 md:px-4 pb-4"),children:(0,i.jsxs)("div",{className:"relative",children:[ee&&(0,i.jsx)(B.I,{children:(0,i.jsx)(V.H,{})}),(0,i.jsx)(s.Z,{dailyTheme:C,showDailyThemeCard:"daily-theme"===I.id,className:"w-full h-full transition-all ".concat(ee?"opacity-0":""),initialImages:(I.id===S.id?q:Q[I.id])||[],initialCursor:M[I.id],options:{url:"/api/images/feed",params:{isFeed:I.id===S.id,category:I.isCategory?I.id:null,purePrompt:I.id===A.id,tabId:I.id,model:null!==(a=({"playground-v2.5":"Playground_v2.5"})[I.id])&&void 0!==a?a:""}},emptyState:I.id===S.id?"My Feed shows images from people you follow. Follow people to see their images here.":"No images."},"feed-".concat(I.id).concat(ee?"-loading":""))]})})]})]})}},7109:function(e,t,r){r.d(t,{a:function(){return o}});var i=r(11163),n=r.n(i),a=r(67294);function o(e){let t=function(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(e.asPath),[o,s]=(0,a.useState)(null);return(0,a.useEffect)(()=>{function t(t){r(e.asPath),s(t)}function i(){r(o),s(null)}return n().events.on("routeChangeStart",t),n().events.on("routeChangeComplete",i),()=>{n().events.off("routeChangeStart",t),n().events.off("routeChangeComplete",i)}},[o,e]),{currentPathname:t,nextPathname:o}}();return(0,a.useMemo)(()=>{let r="string"==typeof t.nextPathname&&t.nextPathname!==t.currentPathname,i=e.some(e=>{var r;return null===(r=t.currentPathname)||void 0===r?void 0:r.includes(e)}),n=e.some(e=>{var r;return null===(r=t.nextPathname)||void 0===r?void 0:r.includes(e)});return i&&n&&r},[e,t.currentPathname,t.nextPathname])}},81410:function(e,t,r){r.d(t,{C:function(){return n}});var i=r(67294);function n(){let[e,t]=i.useState("down");return i.useEffect(()=>{let e=0,r=!1,i=window,n=()=>{let i=window.scrollY;r||(window.requestAnimationFrame(()=>{i>e?t("down"):t("up"),e=i,r=!1}),r=!0)};return i.addEventListener("scroll",n),()=>{i.removeEventListener("scroll",n)}},[]),e}}}]);