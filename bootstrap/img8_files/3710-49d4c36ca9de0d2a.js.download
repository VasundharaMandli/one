(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3710],{16797:function(e,t,r){"use strict";r.d(t,{H:function(){return c}});var n=r(85893),s=r(67294),i=r(5266),l=r(2337),a=r(94623),o=r(69306),d=r(30506);function c(e){let{className:t}=e,r=(0,o.ac)(768),c=(0,s.useMemo)(()=>{let e=Array(50).fill(0).map(()=>({width:Math.floor(100*Math.random()+100),height:Math.floor(100*Math.random()+100)}));return r?e.slice(0,10):e},[r]);return(0,n.jsx)(i.ZP,{columnsCountBreakPoints:a.F,className:t,children:(0,n.jsx)(l.Z,{gutter:"4px",children:c.map((e,t)=>(0,n.jsx)(d.O,{className:"aspect-square w-full rounded-lg",style:{aspectRatio:e.width/e.height}},t))})})}},97115:function(e,t,r){"use strict";r.d(t,{N:function(){return s}});var n=r(85893);function s(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{d:"M16 19L10.5341 11.1739C10.1361 10.604 9.29246 10.604 8.89444 11.1739L6.57143 14.5L5.18016 16.492C5.06289 16.66 5 16.8598 5 17.0646V19H16Z",fill:"currentColor",className:"brightness-125"}),(0,n.jsx)("path",{d:"M19 18V9V6C19 5.44772 18.5523 5 18 5H11H6C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M13.7268 12.902L8.5 19H9.99998H18C18.5523 19 19 18.5523 19 18V17.4444L15.2569 12.9157C14.8616 12.4375 14.1306 12.4309 13.7268 12.902Z",fill:"currentColor"})]})}r(67294)},93710:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return ef},default:function(){return ex}});var n=r(85893),s=r(46825),i=r(33299),l=r(94623),a=r(67294),o=r(41664),d=r.n(o),c=r(21654),u=r(78358),p=r(46271),m=r(1233),h=r(62469),f=r(17615),x=r(55227),g=r(16554),v=r(27603),w=r(33179),j=r(16914),y=r(25432),[b,k]=(0,x.k)({name:"InputGroupStylesContext",errorMessage:"useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<InputGroup />\" "}),N=(0,g.G)(function(e,t){let r=(0,v.jC)("Input",e),{children:s,className:i,...l}=(0,w.Lr)(e),o=(0,y.cx)("chakra-input__group",i),d={},c=a.Children.toArray(s).filter(e=>(0,a.isValidElement)(e)),u=r.field;c.forEach(e=>{var t,n;r&&(u&&"InputLeftElement"===e.type.id&&(d.paddingStart=null!=(t=u.height)?t:u.h),u&&"InputRightElement"===e.type.id&&(d.paddingEnd=null!=(n=u.height)?n:u.h),"InputRightAddon"===e.type.id&&(d.borderEndRadius=0),"InputLeftAddon"===e.type.id&&(d.borderStartRadius=0))});let p=c.map(t=>{var r,n;let s=function(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}({size:(null==(r=t.props)?void 0:r.size)||e.size,variant:(null==(n=t.props)?void 0:n.variant)||e.variant});return"Input"!==t.type.id?(0,a.cloneElement)(t,s):(0,a.cloneElement)(t,Object.assign(s,d,t.props))});return(0,n.jsx)(j.m.div,{className:o,ref:t,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...l,children:(0,n.jsx)(b,{value:r,children:p})})});N.displayName="InputGroup";var C=r(60820),L=(0,g.G)(function(e,t){let{htmlSize:r,...s}=e,i=(0,v.jC)("Input",s),l=(0,w.Lr)(s),a=(0,C.Y)(l),o=(0,y.cx)("chakra-input",e.className);return(0,n.jsx)(j.m.input,{size:r,...a,__css:i.field,ref:t,className:o})});L.displayName="Input",L.id="Input";var S=r(57646),_=r.n(S),P=r(31630),I=r(92323),M=r(8891),F=r.n(M);function E(e){let{userId:t,link:r,setLink:s,onSuccess:i,onCancel:l}=e,[o,d]=(0,a.useState)(r),[c,u]=(0,a.useState)(""),p=(0,P.T1)(),m=(0,I.d)(),h=(0,a.useCallback)(()=>{try{let e=function(e){if(!(e=e.trim()).length)return"";if(e.includes("://")||(e="http://"+e),!["http","https"].includes(e.split("://")[0]))throw Error("Only http and https URLs are allowed");try{return new URL(e).toString()}catch(e){throw Error("URL not valid")}}(o);u(""),d(e);let n=new URL("/api/user",window.location.origin);n.searchParams.set("id",t),fetch(n.toString(),{method:"PATCH",body:JSON.stringify({link:e})}).then(e=>{if(200===e.status){F().track("Saved profile link");return}throw Error()}).catch(e=>{console.error(e),s(r),p("Couldn't update link")}),s(e),i?i():m.closeModal()}catch(e){u(e.message);return}},[o,t,s,i,r,p,m]);return(0,n.jsxs)("div",{className:"bg-gray-90 h-auto w-full flex flex-col text-sm text-gray-25",children:[(0,n.jsx)("header",{className:"py-4 px-8 border-b border-gray-85",children:(0,n.jsx)("h1",{className:"title-primary",children:"Add a link to your profile"})}),(0,n.jsx)("div",{className:"h-full flex justify-start p-8",children:(0,n.jsxs)("div",{className:"flex flex-col w-full gap-y-2",children:[(0,n.jsx)("p",{children:"Link to your personal website, portfolio, or social media account"}),(0,n.jsx)("div",{children:(0,n.jsx)(N,{className:_().profile__add_link_input,children:(0,n.jsx)(L,{placeholder:"Enter URL",className:"!bg-gray-95",value:o,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),h())},autoFocus:!0})})}),c&&(0,n.jsx)("div",{className:"text-dark-pink flex justify-start",children:c})]})}),(0,n.jsx)("footer",{className:"border-t border-gray-85",children:(0,n.jsxs)("div",{className:"flex justify-end py-6 px-8 gap-4",children:[(0,n.jsx)("button",{className:"button button-secondary",onClick:()=>{l?l():m.closeModal()},children:"Cancel"}),(0,n.jsx)("button",{className:"button button-primary border-none",onClick:h,disabled:!r&&0===o.length,children:r&&!o&&"Remove"||"Save"})]})})]})}var A=r(13346);function O(e){let[t,r,s]=function(e){let[t,r]=(0,a.useState)(e);return[t,()=>r(e=>!e),r]}(!1),i=(0,a.useMemo)(()=>{if(!e.createdAt)return null;let t=new Date(null==e?void 0:e.createdAt),r=t.toLocaleString("default",{month:"short"}),n=t.getFullYear();return"".concat(r," ").concat(n)},[e.createdAt]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4 text-pg-200 text-center leading-none",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-1 font-pg-medium text-base",children:[e.followers,(0,n.jsx)("span",{children:"followers"})]}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-1 font-pg-medium text-base",children:[e.following,(0,n.jsx)("span",{children:"following"})]}),e.likes&&(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-1 font-pg-medium text-base",children:[e.likes,(0,n.jsx)("span",{children:"likes"})]})]}),(0,n.jsxs)("div",{className:(0,m.cn)("flex leading-none items-start xs:items-center gap-2 flex-col xs:flex-row"),children:[(0,n.jsxs)("div",{className:"text-base font-pg-medium text-pg-200 shrink-0",children:["Joined ",i]}),(0,n.jsx)("div",{className:(0,m.cn)("w-[2px] h-3.5 bg-pg-500 hidden xs:block"),hidden:!e.bio}),(0,n.jsx)("div",{className:"flex items-center",children:e.bio?(0,n.jsx)("div",{className:"flex gap-2 items-center relative",children:(0,n.jsx)(A.z,{variant:"link",type:"button",className:"flex justify-start items-center gap-2 h-fit text-left py-0 px-0 text-primary-hover max-w-[calc(100vw_-_12rem)] xs:max-w-[12rem] md:max-w-[24rem]",asChild:!0,children:(0,n.jsxs)("a",{href:e.bio,rel:"noreferrer noopener",target:"_blank",children:[(0,n.jsx)("span",{className:"truncate",children:function(e){let t=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"");return t.endsWith("/")?t.slice(0,-1):t}(e.bio)}),e.isMe&&(0,n.jsx)(A.z,{variant:"link",type:"button",className:"gap-2 text-primary-hover py-0 px-0 absolute -right-6 z-10 h-4 w-4",onClick:e=>{e.preventDefault(),r()},children:(0,n.jsx)(h.JtS,{})})]})})}):e.isMe?(0,n.jsxs)(A.z,{variant:"link",type:"button",className:"text-primary-hover gap-2 h-fit py-0 px-0",onClick:r,children:[(0,n.jsx)(h.qDj,{}),"Add link"]}):null})]}),(0,n.jsx)(f.Vq,{open:t,onOpenChange:s,children:(0,n.jsx)(f.cZ,{className:"p-0 overflow-hidden",children:(0,n.jsx)(E,{onCancel:r,onSuccess:r,link:e.bio,setLink:e.setBio,userId:e.userId})})})]})}var B=r(9669),H=r.n(B),z=r(75362);let W=async e=>{await H().post("/api/friendships/create",e),F().track("Followed another user",{source:e.source})},U=async e=>{await H().post("/api/friendships/unfollow",e),F().track("Unfollowed another user",{source:e.source})};function V(e){let t=(0,z.Z)("/api/friendships/create",(e,t)=>{let{arg:r}=t;return W(r)}),r=(0,z.Z)("/api/friendships/unfollow",(e,t)=>{let{arg:r}=t;return U(r)});return e.isMe?null:(0,n.jsx)(A.z,{onClick:()=>e.isFollowing?(e.onUnfollow(e.userId),r.trigger({userId:e.userId,source:"profile"})):(e.onFollow(e.userId),t.trigger({userId:e.userId,source:"profile"})),size:"sm",variant:e.isFollowing?"default":"turbo",children:e.isFollowing?"Following":"Follow"})}function D(e){let{name:t,userId:r,likeCount:s,avatar:i,followerIds:l,followingIds:o,currentUserId:d,userLink:u,isOwnProfile:p,createdAt:h}=e,[f,x]=(0,a.useState)(l.includes(d)),[g,v]=(0,a.useState)(l.length),w=c.t.useUserHasPermission("accounts:manage"),[j,y]=(0,a.useState)(u);return(0,n.jsx)("div",{className:(0,m.cn)("py-7 px-5","bg-pg-900 pt-8 pb-12"),children:(0,n.jsxs)("div",{className:(0,m.cn)("flex flex-row items-start mx-auto gap-8 w-full max-w-lg"),children:[(0,n.jsx)("img",{src:i,alt:"".concat(t," avatar"),className:(0,m.cn)("rounded-full shrink-0 h-18 w-18 xs:h-20 xs:w-20 md:h-24 md:w-24")}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 text-left",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,n.jsx)("h3",{className:(0,m.cn)("text-xl md:text-2xl text-left font-pg-medium leading-none"),children:t}),(0,n.jsx)(V,{userId:r,isFollowing:f,onFollow:()=>{v(g+1),x(!0)},onUnfollow:()=>{v(g-1),x(!1)},isMe:p})]}),(0,n.jsx)(O,{userId:r,followers:g.toLocaleString("en-US")||"0",following:o.length.toLocaleString("en-US")||"0",likes:s?(s||0).toLocaleString("en-US"):void 0,bio:null!=j?j:"",setBio:y,isMe:p,createdAt:h}),w&&(0,n.jsx)("div",{className:"flex w-fit -mb-10 h-6",children:(0,n.jsx)(Z,{userId:r})})]})]})})}function Z(e){let{userId:t}=e,r=c.t.useUserPlans(t);return c.t.useUserHasPermission("accounts:manage")&&r.data?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d(),{href:"/admin/accounts/manage?id=".concat(t),className:"text-sm text-gray-10 p-0.5 bg-orange-500/10 border border-orange-500/50 hover:border-orange-500  pl-2 pr-1.5 rounded-md font-medium flex gap-1 items-center",target:"_blank",children:[r.data&&r.data.length?(0,u.Bc)(r.data,{includeAnnual:!0}).join(", "):"Free",(0,n.jsx)(p.Z,{size:16,className:"text-gray-25"})]}),(0,n.jsxs)(d(),{href:"/admin/errors?id=".concat(t),className:"text-sm text-gray-10 p-0.5 bg-orange-500/10 border border-orange-500/50 hover:border-orange-500  pl-2 pr-1.5 rounded-md font-medium flex gap-1 items-center ml-3",target:"_blank",children:["Errors",(0,n.jsx)(p.Z,{size:16,className:"text-gray-25"})]})]}):null}var R=r(18794),Y=r(40607);function T(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{d:"M6.10913 12.5111C4.63029 11.0216 4.63029 8.60663 6.10913 7.11713C7.58796 5.62762 9.98563 5.62762 11.4645 7.11713L17.3553 13.0505L12 18.4444L6.10913 12.5111Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M6.64466 13.0505L12.5355 7.11713C14.0144 5.62763 16.412 5.62763 17.8909 7.11713C19.3697 8.60663 19.3697 11.0216 17.8909 12.5111L12 18.4444L6.64466 13.0505Z",fill:"currentColor"})]})}var q=r(11163),G=r(15274),J=r(47922),Q=r(88361);function K(){let e=(0,q.useRouter)(),t=(0,J.y)("optimized-profile-tabs"),[r,s]=(0,a.useState)(e.pathname),{id:i}=e.query,l=function(){let[e,t]=a.useState(0);return(0,a.useEffect)(()=>{function e(){t(window.scrollY)}return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),e}(),o=[{name:"My images",icon:G.t,pathname:"/profile/[id]",href:"/profile/".concat(i)},{name:"My likes",icon:T,pathname:"/profile/likes/[id]",href:"/profile/likes/".concat(i)}],c=(0,J.y)("transition-profile-tabs"),u=t?r:e.pathname;return(0,n.jsx)(Y.mQ,{value:u,onValueChange:e=>{t&&s(e)},children:(0,n.jsx)(Y.dr,{className:"bg-pg-900 relative",children:o.map(e=>(0,n.jsx)(Y.SP,{value:e.pathname,className:"data-[state=active]:bg-transparent py-0",children:(0,n.jsxs)(d(),{scroll:!1,href:e.href,className:"flex justify-center gap-2 text-md font-bold items-center",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(e.icon,{className:(0,m.cn)("h-6 w-6 md:h-10 md:w-10",u===e.pathname&&"text-turbo")}),l>0||!c?(0,n.jsx)(n.Fragment,{children:u===e.pathname&&(0,n.jsx)("div",{className:"bg-turbo h-1 w-6 md:w-10 -bottom-2 md:-bottom-3 absolute"})}):(0,n.jsx)(n.Fragment,{children:u===e.pathname&&(0,n.jsx)(Q.E.div,{layoutId:"active-profile-tab",className:"bg-turbo h-1 w-6 md:w-10 -bottom-2 md:-bottom-3 absolute"})})]}),e.name]})},e.name))})})}var X=r(25554),$=r(41752);function ee(e){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("rect",{x:"5",y:"5",width:"14",height:"14",rx:"7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeDasharray:"3 3"})})}var et=r(97115);function er(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{d:"M9 14V5M9 5L6 8M9 5L12 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15 10L15 19M15 19L18 16M15 19L12 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"brightness-125"})]})}function en(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{d:"M5 9C5 7.89543 5.89543 7 7 7H17.5C18.6046 7 19.5 7.89543 19.5 9V17.5C19.5 18.6046 18.6046 19.5 17.5 19.5H7C5.89543 19.5 5 18.6046 5 17.5V9Z",stroke:"currentColor",className:"brightness-125",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M8.25 5V8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M16.25 5V8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M8 11H16.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}let es=[{id:s.I5.Newest,label:"Newest"},{id:s.I5.Oldest,label:"Oldest"},{id:s.I5.MostLiked,label:"Most Liked"}],ei=[{id:s.mY.All,label:"All images"},{id:s.mY.Public,label:"Public images"},{id:s.mY.Private,label:"Private images"}];function el(e){var t,r;let s=function(e){var t;let{dateFilter:r}=e,n=null===(t=(0,i.useSession)().data)||void 0===t?void 0:t.user.db.createdAt,s=(0,a.useMemo)(()=>{let e=new Date(null!=n?n:Date.now());e.setDate(1),e.setHours(0,0,0,0);let t=new Date;t.setHours(0,0,0,0);let r=[];for(;e<t;){let t=e.toLocaleString("default",{month:"long",year:"numeric"});r.unshift({name:t,start:new Date(e).toUTCString(),end:new Date(e.setMonth(e.getMonth()+1)).toUTCString(),id:t})}return r.unshift({name:"All Time",end:null,start:null,id:"all-time"}),r},[n]);return{value:(0,a.useMemo)(()=>s.find(e=>e.start===r.start&&e.end===r.end)||{name:"Custom",start:r.start,end:r.end},[r.end,r.start,s]),options:s}}(e),l=(0,$.dW)(e=>e.active),o=(0,$.dW)(e=>()=>e.setActive(!e.active)),d=(0,$.dW)(e=>e.reset),c=e.isOwnProfile||e.isAdmin,u=e.isOwnProfile&&!e.isMyLikes||e.isAdmin,p=e.isOwnProfile&&!e.isMyLikes||e.isAdmin;return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(A.z,{suppressHydrationWarning:!0,type:"button",variant:"default",className:(0,m.cn)("gap-2 px-3 h-11",l&&"bg-pg-600"),size:"lg",onClick:()=>l?d():o(),children:[(0,n.jsx)(ee,{className:"text-pg-300 h-8 w-8 bg-pg-900 rounded-pg-sm p-1 -ml-2"}),l?"Stop Selecting":"Select Images"]}),u&&(0,n.jsxs)(X.Ph,{value:e.filter,onValueChange:t=>{e.setFilter(t)},children:[(0,n.jsxs)(X.i4,{suppressHydrationWarning:!0,children:[(0,n.jsx)(et.N,{className:"text-pg-300 h-8 w-8 bg-pg-900 rounded-pg-sm p-1 -ml-2"}),null===(t=ei.find(t=>t.id===e.filter))||void 0===t?void 0:t.label]}),(0,n.jsx)(X.Bw,{children:ei.map(e=>(0,n.jsx)(X.Ql,{id:e.id,value:e.id,children:e.label},e.id))})]}),(0,n.jsxs)(X.Ph,{value:e.sortBy,onValueChange:t=>{e.setSortBy(t)},children:[(0,n.jsxs)(X.i4,{suppressHydrationWarning:!0,children:[(0,n.jsx)(er,{className:"text-pg-300 h-8 w-8 bg-pg-900 rounded-pg-sm p-1 -ml-2"}),null===(r=es.find(t=>t.id===e.sortBy))||void 0===r?void 0:r.label]}),(0,n.jsx)(X.Bw,{children:es.map(e=>(0,n.jsx)(X.Ql,{id:e.id,value:e.id,children:e.label},e.id))})]}),p&&(0,n.jsxs)(X.Ph,{value:JSON.stringify(s.value),onValueChange:t=>{try{let r=JSON.parse(t);e.setDateFilter({start:r.start,end:r.end})}catch(e){console.error("Failed to parse date filter option",e)}},children:[(0,n.jsxs)(X.i4,{suppressHydrationWarning:!0,children:[(0,n.jsx)(en,{className:"text-pg-300 h-8 w-8 bg-pg-900 rounded-pg-sm p-1 -ml-2"}),s.value.name]}),(0,n.jsx)(X.Bw,{children:s.options.map(e=>(0,n.jsx)(X.Ql,{value:JSON.stringify(e),children:e.name},e.name))})]})]})}var ea=r(81410);function eo(e){let{tab:t,sortBy:r,setSortBy:i,isOwnProfile:l,filter:a,setFilter:o,dateFilter:d,setDateFilter:c,isAdmin:u=!1}=e,p=t===s.Dt.Likes,h=(0,R.bZ)(),f="down"===(0,ea.C)();return(0,n.jsxs)("div",{className:(0,m.cn)("overflow-x-hidden flex justify-between px-5 pt-5 flex-col sm:flex-row gap-5 z-[8]","bg-gray-99 pb-5","sticky transition-all duration-500","-translate-y-[1px]",h?"":f?"-top-20 xs:-top-40":"top-11 xs:top-20",h?f?"-top-16 xs:-top-32":"top-11 xs:top-16":"","py-2 bg-pg-900 flex-row sm:flex-row overflow-x-auto","border-b border-b-pg-600 mr-4 ml-4 px-0 -mt-1"),children:[l&&(0,n.jsx)(K,{}),(0,n.jsx)("div",{className:(0,m.cn)("flex gap-2 max-w-full items-center overflow-auto","overflow-visible gap-3"),children:(0,n.jsx)(el,{sortBy:r,setSortBy:i,isOwnProfile:l,isAdmin:u,isMyLikes:p,filter:a,setFilter:o,dateFilter:d,setDateFilter:c})})]})}var ed=r(9008),ec=r.n(ed),eu=r(49870),ep=r(11923),em=r(7109),eh=r(16797),ef=!0;function ex(e){var t,r,o;let{user:d,initialImages:u,currentUserId:p,followerIds:m,followingIds:h,initialCursor:f,tab:x,isOwnProfile:g}=e,v=u.reduce((e,t)=>t.likeCount>e.likeCount?t:e,u[0]),[w,j]=(0,a.useState)(s.I5.Newest),[y,b]=(0,a.useState)(s.mY.All),[k,N]=(0,a.useState)({start:null,end:null});(0,a.useEffect)(()=>{F().track("Viewed profile",{tab:x})},[d.id,x]);let C=(0,i.useSession)(),L=c.t.useUserHasPermission("moderation:images:private"),S=g&&C?null===(t=C.data)||void 0===t?void 0:t.user.db.displayName:d.displayName,[_,P]=(0,a.useState)("profile"+d.id+x);(0,a.useEffect)(()=>{_!=="profile"+d.id+x&&(P("profile"+d.id+x),j(s.I5.Newest),b(s.mY.All))},[d.id,x,_]);let I=(0,q.useRouter)();(0,a.useEffect)(()=>{let e=()=>$.dW.getState().reset();return I.events.on("routeChangeStart",e),()=>{I.events.off("routeChangeStart",e)}},[I.events]);let M=(0,J.y)("optimized-profile-tabs"),E=(0,em.a)(["/profile","/profile/likes"]),{data:A}=(0,eu.Z)(d?"/api/user/likeCount?id=".concat(d.id):null,ep.S),O=null==A?void 0:A.likeCount;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ec(),{children:[(0,n.jsx)("meta",{property:"og:image",content:null!==(r=(null==v?void 0:v.url)||d.image)&&void 0!==r?r:void 0}),(0,n.jsx)("meta",{property:"og:image:type",content:"image/png"}),(0,n.jsx)("meta",{property:"og:image:alt",content:"Playground"}),(0,n.jsx)("title",{children:"".concat(S," - Playground")}),(0,n.jsx)("meta",{property:"og:title",content:"".concat(S," - Playground")}),(0,n.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{property:"twitter:title",content:"".concat(S," - Playground")}),(0,n.jsx)("meta",{property:"twitter:image",content:null!==(o=(null==v?void 0:v.url)||d.image)&&void 0!==o?o:void 0}),(0,n.jsx)("meta",{property:"twitter:description",content:"View images"}),(0,n.jsx)("meta",{property:"twitter:url",content:"https://playground.com".concat(I.asPath)})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(n.Fragment,{}),d.disabled&&(0,n.jsx)("div",{className:"bg-orange-400 text-white font-bold p-1 px-8",children:"This user is disabled and is not visible publicly"}),(0,n.jsx)(D,{userId:d.id,createdAt:d.createdAt,name:S,avatar:d.image,followerIds:m,followingIds:h,currentUserId:p,likeCount:O,userLink:d.link,isOwnProfile:g},d.id),(0,n.jsx)(eo,{tab:x,sortBy:w,filter:y,setFilter:e=>{b(e),$.dW.getState().selectAll([])},setDateFilter:e=>{N(e),$.dW.getState().selectAll([])},dateFilter:k,isOwnProfile:g,setSortBy:e=>{Object.values(s.I5).includes(e)?j(e):console.error("Invalid sort by value: ",e)},isAdmin:L}),(0,n.jsx)("div",{className:"p-5 pt-4",children:M&&E?(0,n.jsx)(eh.H,{}):(0,n.jsx)(l.Z,{initialImages:u,initialCursor:f,options:{url:"/api/images/user",params:{id:d.id,likedImages:x===s.Dt.Likes,sortBy:w,filter:y,dateFilter:k}},sortBy:w,filter:y,dateFilter:k,groupBatchedImages:!0,hideProfileImages:!0},_)})]})]})}},7109:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var n=r(11163),s=r.n(n),i=r(67294);function l(e){let t=function(){let e=(0,n.useRouter)(),[t,r]=(0,i.useState)(e.asPath),[l,a]=(0,i.useState)(null);return(0,i.useEffect)(()=>{function t(t){r(e.asPath),a(t)}function n(){r(l),a(null)}return s().events.on("routeChangeStart",t),s().events.on("routeChangeComplete",n),()=>{s().events.off("routeChangeStart",t),s().events.off("routeChangeComplete",n)}},[l,e]),{currentPathname:t,nextPathname:l}}();return(0,i.useMemo)(()=>{let r="string"==typeof t.nextPathname&&t.nextPathname!==t.currentPathname,n=e.some(e=>{var r;return null===(r=t.currentPathname)||void 0===r?void 0:r.includes(e)}),s=e.some(e=>{var r;return null===(r=t.nextPathname)||void 0===r?void 0:r.includes(e)});return n&&s&&r},[e,t.currentPathname,t.nextPathname])}},81410:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(67294);function s(){let[e,t]=n.useState("down");return n.useEffect(()=>{let e=0,r=!1,n=window,s=()=>{let n=window.scrollY;r||(window.requestAnimationFrame(()=>{n>e?t("down"):t("up"),e=n,r=!1}),r=!0)};return n.addEventListener("scroll",s),()=>{n.removeEventListener("scroll",s)}},[]),e}},57646:function(e){e.exports={profile__header_avatar:"Profile_profile__header_avatar__6sVkq",profile__header_friendship_count:"Profile_profile__header_friendship_count__wNgB0",profile__add_link_input:"Profile_profile__add_link_input__xLuln"}},46271:function(e,t,r){"use strict";var n=r(67294),s=r(45697),i=r.n(s);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a=(0,n.forwardRef)(function(e,t){var r=e.color,s=e.size,i=void 0===s?24:s,a=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,["color","size"]);return n.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),n.createElement("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),n.createElement("polyline",{points:"7 7 17 7 17 17"}))});a.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},a.displayName="ArrowUpRight",t.Z=a}}]);